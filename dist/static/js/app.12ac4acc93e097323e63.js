webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xd7I"),n=a("Gir3"),r=a.n(n),l=(a("hsAa"),{name:"app",data:function(){return{charts:null,chartHeight:100,tableList:[]}},mounted:function(){this.$nextTick(function(){this.nextDrawPie()})},watch:{tableList:{handler:function(t,e){this.drawPie()},deep:!0}},methods:{handleInsert:function(t){var e=[],a=0;this.tableList.forEach(function(i,n){e.push({id:a++,title:i.title,rangeTime:i.rangeTime}),i.id===t.id&&e.push({id:a++,title:"",rangeTime:[]})}),this.tableList=e},handleRemove:function(t){this._removeAaary(this.tableList,t),this.nextDrawPie()},handleAdd:function(){this.tableList.push({id:this.tableList.length,title:"",rangeTime:[]}),this.nextDrawPie()},_removeAaary:function(t,e){for(var a=t.length,i=0;i<a;i++)if(t[i]==e)return 0==i?(t.shift(),t):i==a-1?(t.pop(),t):(t.splice(i,1),t)},nextDrawPie:function(t){var e=document.getElementById("main"),a=document.getElementById("chart-contain");a.innerHTML="";var i=document.createElement("div");i.setAttribute("id","chart"),i.style.width=this.chartHeight*(e.clientWidth-20)/100+"px",i.style.height=this.chartHeight*(e.clientHeight-40)/100+"px",a.appendChild(i),this.charts=echarts.init(document.getElementById("chart")),this.drawPie()},drawPie:function(){var t=[],e=[],a=[];this.tableList.forEach(function(i){t.push(i.title),i.rangeTime&&i.rangeTime.length>0&&(e.push(i.rangeTime[0]),a.push(i.rangeTime[1]))});var i={title:{text:"项目进度表",left:10},legend:{data:[]},grid:{containLabel:!0,left:20},xAxis:{type:"time"},yAxis:[{data:t}],toolbox:{feature:{saveAsImage:{pixelRatio:2}}},tooltip:{trigger:"axis",formatter:function(t){var e=t[0].name+"</br>",a=t[0].data,i=t[1].data;return!!(a&&a.getFullYear&&i&&i.getFullYear)&&(a=a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate(),i=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate(),e+=t[0].seriesName+"~"+t[1].seriesName+":</br>"+a+"~"+i+"</br>")}},series:[{name:"开始时间",type:"bar",barWidth:15,stack:"test1",itemStyle:{normal:{color:"rgba(0,0,0,0)"}},data:e},{name:"完成时间",type:"bar",barWidth:15,stack:"test1",itemStyle:{normal:{color:"#F98563"}},data:a}]};this.charts.setOption(i)}}}),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("el-container",[a("el-header",[t._v("\n      甘特图生成\n      ")]),t._v(" "),a("el-container",{staticStyle:{height:"calc(100vh - 60px)"}},[a("el-aside",{attrs:{width:"700px"}},[a("el-table",{attrs:{data:t.tableList,border:"",size:"min"}},[a("el-table-column",{attrs:{prop:"title",label:"任务"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{size:"mini",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入内容"},model:{value:e.row.title,callback:function(a){t.$set(e.row,"title",a)},expression:"scope.row.title"}},[a("el-option",{attrs:{label:"开发",value:"开发"}}),t._v(" "),a("el-option",{attrs:{label:"测试",value:"测试"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"rangeTime",label:"开始-结束日期",width:"380"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-date-picker",{attrs:{type:"daterange",size:"mini","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.row.rangeTime,callback:function(a){t.$set(e.row,"rangeTime",a)},expression:"scope.row.rangeTime"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleInsert(e.row)}}},[t._v("插入")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleRemove(e.row)}}},[t._v("移除")])]}}])})],1),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.handleAdd}},[t._v("新增")]),t._v(" "),a("div",{staticStyle:{position:"relative","margin-bottom":"10px",padding:"0 10px"}},[a("span",{staticStyle:{position:"absolute",left:"0px","line-height":"38px"}},[t._v("高度调节")]),t._v(" "),a("el-slider",{staticStyle:{"margin-left":"80px"},on:{change:t.nextDrawPie},model:{value:t.chartHeight,callback:function(e){t.chartHeight=e},expression:"chartHeight"}})],1)],1),t._v(" "),a("el-main",{attrs:{id:"main"}},[a("div",{attrs:{id:"chart-contain"}})])],1)],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(l,s,!1,function(t){a("SW3Z")},"data-v-de0096aa",null).exports;i.default.config.productionTip=!1,i.default.use(r.a),new i.default({el:"#app",template:"<App/>",components:{App:o}})},SW3Z:function(t,e){},hsAa:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.12ac4acc93e097323e63.js.map